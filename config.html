<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Skagen Watchface Einstellungen</title>
  <style>
    body { font-family: sans-serif; margin: 2em; background: #f4f4f4; }
    label { display: block; margin-top: 1em; }
    select { margin-left: 1em; }
    .button { margin-top: 2em; padding: 1em 2em; font-size: 1.2em; }
  </style>
</head>
<body>
  <h2>Skagen Watchface Einstellungen</h2>
  <form id="config-form">
    <label>Hintergrundfarbe:
      <select id="BG_COLOR">
        <option value="#000000">Schwarz</option>
        <option value="#FFFFFF">Weiß</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
      </select>
    </label>
    <label>Uhrzeit-Farbe:
      <select id="TIME_COLOR">
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
      </select>
    </label>
    <label>Wetter-Farbe:
      <select id="WEATHER_COLOR">
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
      </select>
    </label>
    <label>Datum-Farbe:
      <select id="DATE_COLOR">
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
      </select>
    </label>
    <label>Pebble-Batterie-Farbe:
      <select id="BATTERY_COLOR">
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
      </select>
    </label>
    <label>Handy-Batterie-Farbe:
      <select id="PHONE_BATTERY_COLOR">
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
      </select>
    </label>
    <label>Stepbar-Farbe:
      <select id="STEPBAR_COLOR">
        <option value="#FF0000">Rot</option>
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
        <option value="#FF00FF">Magenta</option>
      </select>
    </label>
    <label>Stepbar-Hintergrundfarbe:
      <select id="STEPBAR_BG_COLOR">
        <option value="#FFFFFF">Weiß</option>
        <option value="#000000">Schwarz</option>
        <option value="#FF0000">Rot</option>
        <option value="#FFFF00">Gelb</option>
        <option value="#00FF00">Grün</option>
        <option value="#0000FF">Blau</option>
        <option value="#00FFFF">Cyan</option>
        <option value="#808080">Grau</option>
        <option value="#FF00FF">Magenta</option>
      </select>
    </label>
    <button type="submit" class="button">Speichern &amp; an Pebble senden</button>
  </form>
  <script>
    function getQueryParam(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) === variable) {
          return decodeURIComponent(pair[1]);
        }
      }
      return null;
    }

    const pebbleColors = {
      "#000000": 0xC0, // Schwarz
      "#FFFFFF": 0xFF, // Weiß
      "#FF0000": 0xE0, // Rot
      "#FFFF00": 0xFC, // Gelb
      "#00FF00": 0xC4, // Grün
      "#0000FF": 0x55, // Blau
      "#00FFFF": 0x5D, // Cyan
      "#808080": 0xAA, // Grau
      "#FF00FF": 0xF8  // Magenta
    };

    document.getElementById('config-form').onsubmit = function(e) {
      e.preventDefault();
      var config = {
        10: pebbleColors[document.getElementById('BG_COLOR').value],            // BG_COLOR
        11: pebbleColors[document.getElementById('TIME_COLOR').value],          // TIME_COLOR
        12: pebbleColors[document.getElementById('WEATHER_COLOR').value],       // WEATHER_COLOR
        13: pebbleColors[document.getElementById('DATE_COLOR').value],          // DATE_COLOR
        14: pebbleColors[document.getElementById('BATTERY_COLOR').value],       // BATTERY_COLOR
        15: pebbleColors[document.getElementById('PHONE_BATTERY_COLOR').value], // PHONE_BATTERY_COLOR
        16: pebbleColors[document.getElementById('STEPBAR_COLOR').value],       // STEPBAR_COLOR
        17: pebbleColors[document.getElementById('STEPBAR_BG_COLOR').value]     // STEPBAR_BG_COLOR
      };
      var return_to = getQueryParam('return_to');
      var locationStr = return_to ? decodeURIComponent(return_to) : 'pebblejs://close#';
      document.location = locationStr + encodeURIComponent(JSON.stringify(config));
    };
  </script>
</body>
</html> 
