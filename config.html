<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Skagen Watchface Einstellungen</title>
  <style>
    body { font-family: sans-serif; margin: 2em; background: #f4f4f4; }
    label { display: block; margin-top: 1em; }
    input[type="color"] { margin-left: 1em; }
    .button { margin-top: 2em; padding: 1em 2em; font-size: 1.2em; }
  </style>
</head>
<body>
  <h2>Skagen Watchface Einstellungen</h2>
  <form id="config-form">
    <label>Hintergrundfarbe:
      <input type="color" id="BG_COLOR" value="#000000">
    </label>
    <label>Uhrzeit-Farbe:
      <input type="color" id="TIME_COLOR" value="#FFFFFF">
    </label>
    <label>Wetter-Farbe:
      <input type="color" id="WEATHER_COLOR" value="#FFFFFF">
    </label>
    <label>Datum-Farbe:
      <input type="color" id="DATE_COLOR" value="#FFFFFF">
    </label>
    <label>Pebble-Batterie-Farbe:
      <input type="color" id="BATTERY_COLOR" value="#FFFFFF">
    </label>
    <label>Handy-Batterie-Farbe:
      <input type="color" id="PHONE_BATTERY_COLOR" value="#FFFFFF">
    </label>
    <label>Stepbar-Farbe:
      <input type="color" id="STEPBAR_COLOR" value="#FF0000">
    </label>
    <label>
      <input type="checkbox" id="STEPBAR_VISIBLE" checked>
      Stepbar anzeigen
    </label>
    <button type="submit" class="button">Speichern &amp; an Pebble senden</button>
  </form>
  <script>
    function getQueryParam(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) === variable) {
          return decodeURIComponent(pair[1]);
        }
      }
      return null;
    }

    document.getElementById('config-form').onsubmit = function(e) {
      e.preventDefault();
      var config = {
        BG_COLOR: document.getElementById('BG_COLOR').value,
        TIME_COLOR: document.getElementById('TIME_COLOR').value,
        WEATHER_COLOR: document.getElementById('WEATHER_COLOR').value,
        DATE_COLOR: document.getElementById('DATE_COLOR').value,
        BATTERY_COLOR: document.getElementById('BATTERY_COLOR').value,
        PHONE_BATTERY_COLOR: document.getElementById('PHONE_BATTERY_COLOR').value,
        STEPBAR_COLOR: document.getElementById('STEPBAR_COLOR').value,
        STEPBAR_VISIBLE: document.getElementById('STEPBAR_VISIBLE').checked
      };
      var return_to = getQueryParam('return_to');
      var locationStr = return_to ? decodeURIComponent(return_to) : 'pebblejs://close#';
      document.location = locationStr + encodeURIComponent(JSON.stringify(config));
    };
  </script>
</body>
</html> 